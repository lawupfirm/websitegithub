# Payment System - Visual Architecture & Flow

## Complete System Overview

\`\`\`
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         LAWUP PAYMENT SYSTEM                         â”‚
â”‚                        January 27, 2026 - LIVE                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                              USER INTERFACE
                              
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Contact Form              Floating Widget    Footer  â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â” â”‚
    â”‚  â”‚ Fill Form        â”‚      â”‚ Pay Fee     â”‚  â”‚ Pay  â”‚ â”‚
    â”‚  â”‚ Verify Email OTP â”‚  OR  â”‚ (Purple)    â”‚  â”‚ Now  â”‚ â”‚
    â”‚  â”‚ [ğŸ’³ Pay]        â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”‚ Opens
                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚          PAYMENT MODAL COMPONENT                     â”‚
    â”‚                                                       â”‚
    â”‚  â”Œâ”€ Mode Selection â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚ [Service Wise]  vs  [Custom Amount]        â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚                                                       â”‚
    â”‚  Service Option:          Custom Option:            â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
    â”‚  â”‚ Select Service     â”‚  â”‚ Enter Amount     â”‚       â”‚
    â”‚  â”‚ â€¢ Consultation     â”‚  â”‚ (Min â‚¹100)       â”‚       â”‚
    â”‚  â”‚ â€¢ Drafting         â”‚  â”‚ â‚¹ [_______]      â”‚       â”‚
    â”‚  â”‚ â€¢ Representation   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
    â”‚  â”‚ â€¢ Corporate        â”‚                             â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
    â”‚                                                       â”‚
    â”‚  Amount Summary:                                    â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚ Total: â‚¹[AMOUNT] (Real-time display)       â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚                                                       â”‚
    â”‚  [Cancel]  [Pay â‚¹AMOUNT]                           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”‚ Click "Pay"
                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚          RAZORPAY PAYMENT GATEWAY                    â”‚
    â”‚                                                       â”‚
    â”‚  Razorpay Checkout:                                 â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚  â”‚ Amount: â‚¹XXXX                              â”‚    â”‚
    â”‚  â”‚ Service: [Service Name]                    â”‚    â”‚
    â”‚  â”‚ Customer: [Name]                           â”‚    â”‚
    â”‚  â”‚                                             â”‚    â”‚
    â”‚  â”‚ Payment Methods:                           â”‚    â”‚
    â”‚  â”‚ [ğŸ’³ Card] [ğŸ“± UPI] [ğŸ’° Wallet]            â”‚    â”‚
    â”‚  â”‚                                             â”‚    â”‚
    â”‚  â”‚ [Complete Payment]                         â”‚    â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                     â”‚
         â–¼ (Success)          â–¼ (Failure)
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ SIGNATURE VERIFYâ”‚  â”‚ ERROR MESSAGE    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚
         â”‚ âœ“ Valid           â”‚ Retry
         â–¼                    â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     DATABASE: SAVE PAYMENT RECORD      â”‚
    â”‚  order_id, payment_id, status, user    â”‚
    â”‚  amount, service, signature            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚       SEND EMAIL RECEIPT (via Resend API)            â”‚
    â”‚                                                       â”‚
    â”‚  To: customer@email.com                              â”‚
    â”‚  From: noreply@lawup.in                              â”‚
    â”‚  Subject: Payment Receipt - â‚¹XXXX                    â”‚
    â”‚                                                       â”‚
    â”‚  Body (HTML):                                        â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚  â”‚ âœ“ PAYMENT RECEIVED SUCCESSFULLY            â”‚    â”‚
    â”‚  â”‚                                             â”‚    â”‚
    â”‚  â”‚ Receipt #: LWP000123                       â”‚    â”‚
    â”‚  â”‚ Amount: â‚¹XXXX                              â”‚    â”‚
    â”‚  â”‚ Service: [Service Name]                    â”‚    â”‚
    â”‚  â”‚ Date: Jan 27, 2026                         â”‚    â”‚
    â”‚  â”‚                                             â”‚    â”‚
    â”‚  â”‚ ğŸ’¼ OUR TEAM WILL GET IN TOUCH              â”‚    â”‚
    â”‚  â”‚ within 24 business hours                   â”‚    â”‚
    â”‚  â”‚                                             â”‚    â”‚
    â”‚  â”‚ LawUp Consulting                           â”‚    â”‚
    â”‚  â”‚ Chamber: Ground B188a, Jamunapuri         â”‚    â”‚
    â”‚  â”‚ Jaipur, Rajasthan - 302039                â”‚    â”‚
    â”‚  â”‚ Ph: +91-9716968000                        â”‚    â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     MODAL: SHOW SUCCESS MESSAGE                      â”‚
    â”‚                                                       â”‚
    â”‚  âœ“ Payment Successful!                              â”‚
    â”‚  Receipt sent to your email.                         â”‚
    â”‚  We will get in touch soon.                         â”‚
    â”‚                                                       â”‚
    â”‚  [Close]                                             â”‚
    â”‚                                                       â”‚
    â”‚  (Auto-close in 2 seconds)                          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
\`\`\`

---

## Backend API Flow

\`\`\`
CLIENT SIDE                          SERVER SIDE

[User Click]
    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                               â”‚
    â–¼                                          â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
[Create Order Request]                         â”‚ /api/razorpay/create-orderâ”‚
    â”‚                                          â”‚ - Validate amount          â”‚
    â”‚     JSON: {                              â”‚ - Create Razorpay order    â”‚
    â”‚       amount,                            â”‚ - Save to DB (pending)     â”‚
    â”‚       email,                             â”‚ - Return order ID & key    â”‚
    â”‚       service                            â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚     }                                         â”‚
    â”‚                                               â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                                               â”‚
    â–¼                                          â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
[Razorpay Checkout Modal]                      â”‚ Razorpay API (External)    â”‚
    â”‚                                          â”‚ - Process payment          â”‚
    â”‚ (User enters card/UPI)                  â”‚ - Return payment_id        â”‚
    â”‚                                          â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                                               â”‚
    â–¼                                               â”‚
[Payment Handler Callback]                         â”‚
    â”‚                                               â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                                               â”‚
    â–¼                                          â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
[Verify Payment]                               â”‚ /api/razorpay/verify-paymentâ”‚
    â”‚                                          â”‚ - Verify signature (crypto) â”‚
    â”‚     JSON: {                              â”‚ - Update DB (completed)     â”‚
    â”‚       razorpay_order_id,                 â”‚ - Return success/error      â”‚
    â”‚       razorpay_payment_id,               â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚       razorpay_signature                      â”‚
    â”‚     }                                         â”‚
    â”‚                                               â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                                               â”‚
    â–¼ (if verified)                            â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
[Send Receipt Email]                           â”‚ /api/send-payment-receipt â”‚
    â”‚                                          â”‚ - Build HTML template      â”‚
    â”‚     JSON: {                              â”‚ - Send via Resend API      â”‚
    â”‚       email,                             â”‚ - Log in database          â”‚
    â”‚       amount,                            â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚       service,                               â”‚
    â”‚       payment_id                             â”‚
    â”‚     }                                        â”‚
    â”‚                                              â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                                              â”‚
    â–¼                                          â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
[Show Success Modal]                           â”‚ Email Sent to Customer  â”‚
    â”‚                                          â”‚ âœ“ Receipt in inbox      â”‚
    â”‚ âœ“ Payment Successful!                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚ Receipt sent to email
    â”‚
    â””â”€â”€â”€â”€â”€â”€> [Auto-close in 2s]
\`\`\`

---

## Database Schema

\`\`\`
TABLE: payments

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Columns:                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id                    UUID (primary key)                â”‚
â”‚ order_id             String (unique) - Razorpay order  â”‚
â”‚ payment_id           String - Razorpay payment ID      â”‚
â”‚ amount               Decimal - Amount in INR           â”‚
â”‚ currency             String - Always "INR"             â”‚
â”‚ status               String - pending|completed|failed â”‚
â”‚ email                String - Customer email           â”‚
â”‚ phone                String - Customer phone           â”‚
â”‚ name                 String - Customer name            â”‚
â”‚ service              String - Service selected         â”‚
â”‚ signature            String - Payment signature       â”‚
â”‚ receipt_data         JSONB - Additional data          â”‚
â”‚ created_at           Timestamp - Payment created      â”‚
â”‚ updated_at           Timestamp - Last update          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SAMPLE RECORD:

{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "order_id": "order_SXd6qP3K9KXo0U",
  "payment_id": "pay_SXd6sTfW0Z09sS",
  "amount": 5000.00,
  "currency": "INR",
  "status": "completed",
  "email": "customer@example.com",
  "phone": "+919999999999",
  "name": "John Doe",
  "service": "Divorce & Separation Consulting",
  "signature": "9ef4dffbfd84f1318f6739a3ce19f9d85851857ae648f114332d8401e0949a",
  "receipt_data": {
    "order_id": "ORDER_1706337600000"
  },
  "created_at": "2026-01-27T10:30:00Z",
  "updated_at": "2026-01-27T10:31:00Z"
}
\`\`\`

---

## File Structure

\`\`\`
lawup/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ razorpay/
â”‚   â”‚   â”‚   â”œâ”€â”€ create-order/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ route.ts âœ“ NEW
â”‚   â”‚   â”‚   â”œâ”€â”€ verify-payment/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ route.ts âœ“ NEW
â”‚   â”‚   â”‚   â””â”€â”€ webhook/
â”‚   â”‚   â”‚       â””â”€â”€ route.ts âœ“ NEW
â”‚   â”‚   â””â”€â”€ send-payment-receipt/
â”‚   â”‚       â””â”€â”€ route.ts âœ“ NEW
â”‚   â”œâ”€â”€ contact/
â”‚   â”‚   â””â”€â”€ ContactPageClient.tsx âœ“ UPDATED
â”‚   â””â”€â”€ practice-areas/
â”‚       â””â”€â”€ page.tsx âœ“ UPDATED
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ payment-modal.tsx âœ“ NEW
â”‚   â”œâ”€â”€ floating-contact-widget.tsx âœ“ UPDATED
â”‚   â”œâ”€â”€ footer.tsx âœ“ ALREADY HAS PAY NOW
â”‚   â””â”€â”€ fee-structure-section.tsx âœ“ NEW
â”‚
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ services.ts âœ“ NEW (25+ services)
â”‚   â””â”€â”€ blog-posts.tsx âœ“ UPDATED (5 new 2026 blogs)
â”‚
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ create-payments-table.sql âœ“ EXECUTED
â”‚
â””â”€â”€ Documentation/
    â”œâ”€â”€ COMPLETE_IMPLEMENTATION_SUMMARY.md âœ“ NEW
    â”œâ”€â”€ RAZORPAY_INTEGRATION_COMPLETE.md âœ“ NEW
    â”œâ”€â”€ RAZORPAY_SETUP_GUIDE.md âœ“ NEW
    â”œâ”€â”€ FEE_STRUCTURE_GUIDE.md âœ“ NEW
    â””â”€â”€ PAYMENT_SYSTEM_ARCHITECTURE.md âœ“ (THIS FILE)
\`\`\`

---

## Environment Variables Required

\`\`\`
RAZORPAY_KEY_ID=rzp_live_S8vENUyAOwaGhw âœ“ ALREADY SET
RAZORPAY_KEY_SECRET=<ADD FROM RAZORPAY DASHBOARD>
RAZORPAY_WEBHOOK_SECRET=<OPTIONAL - FOR WEBHOOKS>
RESEND_API_KEY=<ALREADY CONFIGURED>
NEXT_PUBLIC_SUPABASE_URL=<ALREADY CONFIGURED>
SUPABASE_SERVICE_ROLE_KEY=<ALREADY CONFIGURED>
\`\`\`

---

## Key Features Summary

\`\`\`
âœ… Two Payment Modes
   â”œâ”€ Service Wise (25+ predefined services)
   â””â”€ Custom Amount (any amount â‰¥ â‚¹100)

âœ… Multiple Access Points
   â”œâ”€ Contact Form (after email verification)
   â”œâ”€ Floating Widget ("Pay Fee" button)
   â””â”€ Footer ("Pay Now" link)

âœ… Payment Processing
   â”œâ”€ Razorpay API integration (live keys)
   â”œâ”€ Signature verification (crypto)
   â”œâ”€ Database transaction tracking
   â””â”€ Webhook support (optional)

âœ… Email Receipts
   â”œâ”€ Automatic sending (Resend API)
   â”œâ”€ Professional HTML template
   â”œâ”€ Payment details included
   â””â”€ Follow-up message included

âœ… Database Integration
   â”œâ”€ Supabase payments table
   â”œâ”€ Payment history tracking
   â”œâ”€ User information storage
   â””â”€ Reporting capabilities

âœ… Security
   â”œâ”€ Signature verification
   â”œâ”€ Minimum amount validation
   â”œâ”€ Environment variable protection
   â””â”€ Error handling (safe messages)
\`\`\`

---

**System Status**: ğŸŸ¢ PRODUCTION READY

**Next Step**: Add RAZORPAY_KEY_SECRET to environment variables and deploy!
